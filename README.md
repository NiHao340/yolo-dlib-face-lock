# yolo-dlib-face-lock

YOLO + dlib 的人脸识别 / 人脸解锁系统（PyQt5 稳定版）

---

## 📌 项目简介

本项目是一套完整的桌面端人脸安全准入方案。通过 YOLOv8 极速定位人脸，结合 dlib ResNet 进行高精度特征比对，
并利用 PyQt5 提供了丝滑的交互体验。系统支持双因子验证（人脸+密码），确保在各种复杂环境下均能稳定运行。

项目特点：
- 双模检测引擎：结合 YOLOv8 的响应速度与 dlib 的识别精度。
- 工业级交互：基于 PyQt5 的多线程 (QThread) 架构，确保视频预览不掉帧、UI 界面不卡死。
- 灵活的硬件支持：支持内置与 USB 外接摄像头，具备一键热切换功能。
- 安全防御机制：内置初次运行自动注册逻辑与离线密码冗余方案。

---

## 🧱 项目结构

```text
yolo-dlib-face-lock/
├── README.md              # 项目说明（本文件）
├── requirements.txt       # 依赖环境
│
├── src/                   # 核心代码
│   ├── main.py            # 程序主入口 (PyQt5 界面启动)
│   ├── dlib_face.py       # 人脸识别逻辑 (dlib 特征提取)
│   ├── config.py          # 项目配置文件 (路径、阈值等)
│   └── worker.py          # 多线程处理逻辑 (解耦界面与算法)
│
├── models/                # 模型文件
│   ├── README.md          # 模型下载说明
│   └── yolov8n.pt         # YOLOv8 权重文件
│
└── data/
    ├── pwd.txt            # 存储加密密码文件
```

---

## 🧪 运行环境

- Python 3.8+
- Windows
- 推荐使用虚拟环境（venv / conda）

---

## 📦 安装依赖
- pip install -r requirements.txt

---

## 📥 模型下载说明

- 由于模型文件体积较大，不直接上传到 GitHub。
- 请按照以下说明下载并放入 models/ 目录：
- dlib 人脸识别模型
- shape_predictor_68_face_landmarks.dat
- dlib_face_recognition_resnet_model_v1.dat
- 👉 具体下载地址与说明见：
- models/README.md

---

##▶️ 运行项目
1️⃣ 启动程序
在项目根目录下打开终端，执行以下命令：
python src/main.py

## ▶️ 运行项目
1.在终端中执行以下命令即可启动：python src/main.py
- 启动后可以选择默认摄像头0和外界摄像头：增加了一个 “切换摄像头” 按钮，点击它可以轮询切换，直到你看到画面。
- 再程序中可以选择内置摄像头0和外置摄像头1
- 可通过图形界面进行人脸锁定操作。
- 这是一个非常实用的功能升级。为了实现 “人脸解锁”，我们需要在程序启动时增加一个检测环节：

检测注册状态：检查是否已经录入过“管理员人脸”。

如果没有：启动“注册模式”，让你录入一张人脸作为“钥匙”。

如果已有：启动“解锁模式”，打开摄像头，只有检测到管理员人脸时才进入主程序。

保留密码兜底：如果人脸识别失败（比如光线太暗），依然允许切换到密码解锁。

以下是集成 人脸解锁 + 密码备份 + 实时锁定 的完整 main.py 代码。

---

## ⚠️ 注意事项
- 首次运行请确认模型路径正确
- 模型文件未放置会导致程序启动失败

---

## 📄 免责声明
- 本项目仅用于学习与研究目的，请勿用于任何非法或侵犯隐私的场景。
